!function(t){function e(o){if(i[o])return i[o].exports;var s=i[o]={exports:{},id:o,loaded:!1};return t[o].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var i={};return e.m=t,e.c=i,e.p="./dst",e(0)}([function(t,e,i){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function s(t,e){var i=t.toLowerCase(),o={waterfall:n["default"],puzzle:a["default"],barrel:p["default"]};return void 0!==o[i]?new o[i](e):void console.error("The type doesnt exsist!")}Object.defineProperty(e,"__esModule",{value:!0});var h=i(1),n=o(h),r=i(4),a=o(r),l=i(5),p=o(l);window.WooAlbum=s,e["default"]=s},function(t,e,i){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function s(t){n["default"].call(this,t),this.type="waterfall",this.col={num:0},this.tmp={col:[]},this.colWidth=0,this.init(t)}Object.defineProperty(e,"__esModule",{value:!0});var h=i(2),n=o(h);s.prototype=new n["default"],s.prototype.constructor=s,s.prototype._clearTmp=function(){this.tmp.col=[];for(var t=0;t<this.col.num;t++)this.tmp.col.push(0-this.gutter.y)},s.prototype._layItem=function(t,e){var i=t.getElementsByTagName("img")[0],o=this.__checkCol();console.log(o),console.log(this.tmp.col),t.style.height=this.colWidth*i.offsetHeight/i.offsetWidth+"px",i.style.height=t.style.height,t.style.width=this.colWidth+"px",i.style.width=t.style.width,t.style.left=(this.colWidth+this.gutter.y)*o+"px",t.style.top=this.tmp.col[o]+this.gutter.y+"px",this.container.style.minHeight=this.tmp.col[this.__checkMaxCol()]+"px",this.tmp.col[o]+=parseInt(i.style.height)+this.gutter.y,this.hideLoading(),t.style.visibility="",e||this.elements.push(t)},s.prototype.__checkMaxCol=function(){for(var t=0,e=this.tmp.col[t],i=1,o=this.tmp.col.length;o>i;i++)this.tmp.col[i]>e&&(t=i,e=this.tmp.col[i]);return t},s.prototype.__checkCol=function(){for(var t=0,e=this.tmp.col[t],i=1,o=this.tmp.col.length;o>i;i++)this.tmp.col[i]<e&&(t=i,e=this.tmp.col[i]);return t},s.prototype._initCfg=function(t){var e=t.waterfall;this.setColNum(e.colNum,!1)},s.prototype._calLay=function(){this.colWidth=(this.size.width+this.gutter.x)/this.col.num-this.gutter.x,this.colWidth<0&&console.error("col width can't be negative!")},s.prototype._init=function(t){for(var e=0;e<this.col.num;e++)this.tmp.col.push(0-this.gutter.y)},s.prototype.setColNum=function(t,e){return t=parseInt(t),void 0===t||0>=t?console.error("WOOALBUM ERROR : undefined waterfall col number"):(void 0===e&&(e=!0),this.col.num=parseInt(t),void(e&&this._reload()))},s.prototype.getColNum=function(){return this.col.num},e["default"]=s},function(t,e,i){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function s(t){this.LAYOUT={PUZZLE:1,WATERFALL:2,BARREL:3},this.images=[],this.container=null,this.elements=[],this.layout=1,this.gutter={x:0,y:0},this.size={width:"auto",height:"auto"},this.fullScreen=!1,this.resizeRefresh=!1,this.scrollFetch=!1,this.enableAjax=!1,this.ajaxUrl="",this.modal=null,this.config=t,this.page=0,this.loadingEle=null,this.loading=!1}Object.defineProperty(e,"__esModule",{value:!0});var h=i(3),n=o(h);s.prototype._eventScrollFetch=function(){function t(){var t=0;return document.documentElement&&document.documentElement.scrollTop?t=document.documentElement.scrollTop:document.body&&(t=document.body.scrollTop),t}function e(){var t=0;return t=document.body.clientHeight&&document.documentElement.clientHeight?Math.min(document.body.clientHeight,document.documentElement.clientHeight):Math.max(document.body.clientHeight,document.documentElement.clientHeight)}function i(){return Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}t()+e()==i()&&this.fetchData()},s.prototype._eventFullscreen=function(t){var e=t.target;if("img"==e.nodeName.toLowerCase()){var i=e.cloneNode();i.style.width="",i.style.height="",this.modal?this.modal.setElement(i):this.modal=(0,n["default"])(i),this.modal.show()}},s.prototype._eventResizeRefresh=function(){this.size.width;this.setSize(this.config.size.width||"auto",this.config.size.height||"auto",!1),this._clearTmp(),this._calLay(),this.layLoadItems()},s.prototype._reload=function(){this._clearTmp(),this._calLay(),this.layLoadItems()},s.prototype._fetchAjax=function(t,e){function i(t){var e=null;window.ActiveXObject?e=new ActiveXObject("Microsoft.XMLHTTP"):window.XMLHttpRequest&&(e=new XMLHttpRequest),null!=e&&(e.open("GET",t.url,!0),e.onreadystatechange=function(){4==e.readyState&&200==e.status&&t.success(e.responseText)},e.send(null))}i({url:t,success:function(t){var t=JSON.parse(t);e(t)}.bind(this)})},s.prototype._addImage=function(t){var e=document.createElement("div");e.style.position="absolute",e.setAttribute("class","item");var i=document.createElement("img");i.setAttribute("src",t),i.onload=function(t){var e=t.target.parentNode;this._layItem(e,!1)}.bind(this),e.appendChild(i),e.style.visibility="hidden",this.container.appendChild(e)},s.prototype.setImage=function(t){return"string"==typeof t?void this.setImage([t]):(this.container.innerHTML="",this.elements=[],this.images=[],this._clearTmp(),void this.addImage(t))},s.prototype.getImageDomElements=function(){return this.elements},s.prototype.addImage=function(t){if("string"==typeof t)return void this.addImage([t]);for(var e=0,i=t.length;i>e;e++)this.images.push(t[e]),this._addImage(t[e])},s.prototype.removeImage=function(t){},s.prototype.setLayout=function(t){this.layout=this.LAYOUT[t]},s.prototype.getLayout=function(){return this.layout},s.prototype.setGutter=function(t,e,i){return void 0===t?void console.error("error gutter value!"):(void 0===i&&(i=!0),this.gutter.x=parseInt(t),void 0===e?this.gutter.y=parseInt(t):this.gutter.y=parseInt(e),void(i&&this._reload()))},s.prototype.enableFullscreen=function(){this.fullScreen=!0,this.container.addEventListener("click",this._eventFullscreen)},s.prototype.disableFullscreen=function(){this.fullScreen=!1,this.container.removeEventListener("click",this._eventFullscreen)},s.prototype.isFullscreenEnabled=function(){return this.fullScreen},s.prototype.enableScrollFetch=function(){this.scrollFetch=!0,window.addEventListener("scroll",this._eventScrollFetch.bind(this))},s.prototype.disableScrollFetch=function(){this.scrollFetch=!1,window.removeEventListener("scroll",this._eventScrollFetch)},s.prototype.isScrollFetchEnabled=function(){return this.scrollFetch},s.prototype.fetchData=function(){if(this.enableAjax){this.showLoading(),this.page++;var t=this.config.ajax.getNextpage(this.page);this._fetchAjax(t,function(t){var e=this.config.ajax.getImages(t);this.addImage(e)}.bind(this))}},s.prototype.enableResizeRefresh=function(){this.resizeRefresh=!0,window.addEventListener("resize",this._eventResizeRefresh.bind(this))},s.prototype.disableResizeRefresh=function(){this.resizeRefresh=!1,window.removeEventListener("resize",this._eventResizeRefresh)},s.prototype.isResizeRefreshEnabled=function(){return this.resizeRefresh},s.prototype.setSize=function(t,e,i){void 0!==t&&void 0!==e||console.error("WOOALBUM ERROR : undefined container width or height!"),void 0===i&&(i=!0),void 0===this.config.size&&(this.config.size={width:"auto",height:"auto"}),this.config.size.width=t,this.config.size.height=e,"auto"===t?this.size.width=window.innerWidth-20:this.size.width=parseInt(t),this.container.style.width=this.size.width+"px","auto"!==e&&(this.size.height=parseInt(e),this.container.style.height=this.size.height+"px"),i&&this._reload()},s.prototype.getSize=function(){return this.size},s.prototype.setAjaxurl=function(t){this.enableAjax=!0,this.ajaxUrl=t},s.prototype.setContainer=function(t){if(void 0!==t&&t){this.container=t;var e=t.getAttribute("class");e=e?e+" ":"",t.setAttribute("class",e+"wooalbum "+this.type)}else console.error("WOOALBUM ERROR : undefined container element!")},s.prototype.getContainer=function(){return this.container},s.prototype.layLoadItems=function(){for(var t=this.getImageDomElements(),e=0,i=t.length;i>e;e++)this._layItem(t[e],!0)},s.prototype.showLoading=function(){if(!this.loadingEle){var t=document.createElement("div");t.innerHTML="<div class='rect1'></div><div class='rect2'></div><div class='rect3'></div><div class='rect4'></div><div class='rect5'></div>",t.setAttribute("class","loading"),this.loadingEle=t}this.container.appendChild(this.loadingEle),this.loading=!0},s.prototype.hideLoading=function(){this.loading&&(this.container.removeChild(this.loadingEle),this.loading=!1)},s.prototype.init=function(t){this.setContainer(t.container),this.setLayout();var e=t.size||{};this.setSize(e.width||"auto",e.height||"auto",!1);var i=t.gutter;this.setGutter(i.x,i.y,!1);var o=t.ajax;if(o.has)this.setAjaxurl(o.url),this.fetchData();else{var s=t.image;this.setImage(s.src||[])}var h=t.enableResizerefresh;h&&this.enableResizeRefresh();var n=t.enableFullscreen;n&&this.enableFullscreen();var r=t.enableScrollfetch;r&&this.enableScrollFetch(),this._initCfg&&this._initCfg(t),this._calLay(),this._init(t)},e["default"]=s},function(t,e){"use strict";function i(t){if(!(this instanceof i))return new i(t);var e=document.createElement("div");e.setAttribute("class","modal"),e.appendChild(t),this.ele=e,this.effect="",this._append=!1,this.ele.addEventListener("click",function(t){var e=t.target;"img"!==e.nodeName.toLowerCase()&&this.hide()}.bind(this))}Object.defineProperty(e,"__esModule",{value:!0}),Array.prototype.contains=function(t){for(var e=this.length;e--;)return this[e]!==t},i.prototype={EffectName:["fade"],setEffect:function(t){t=t.toLowerCase(),this.EffectName.contains(t)&&(this.effect=t)},setElement:function(t){this.ele.innerHTML="",this.ele.appendChild(t)},show:function(){this._append?this.ele.style.display="block":(this._append=!0,document.body.appendChild(this.ele),this.ele.style.display="block")},hide:function(){this.ele.style.display="none"},addClass:function(t){var e=this.ele.getAttribute("class"),i=e.split(" ");i.contains(t)||this.ele.setAttribute("class",e+" "+t)},removeClass:function(t){for(var e=this.ele.getAttribute("class"),i=e.split(" "),o=i.length,s="";o--;)i[o]!==t&&(s+=" "+i[o]);this.ele.setAttribute("class",s)}},e["default"]=i},function(t,e,i){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function s(t){n["default"].call(this,t),this.type="puzzle",this.tmp={index:0},this.calSize=null,this.init(t)}Object.defineProperty(e,"__esModule",{value:!0});var h=i(2),n=o(h);s.prototype=new n["default"],s.prototype.constructor=s,s.prototype._clearTmp=function(){this.tmp.index=0},s.prototype.enableScrollFetch=function(){this.scrollFetch=!1},s.prototype._layItem=function(t,e){this.tmp.index++;var i=this.calSize(this.tmp.index),o="";for(var s in i)o+=s+":"+i[s]+";";t.setAttribute("style",o),this.hideLoading(),this.container.appendChild(t),e||this.elements.push(t)},s.prototype.setSize=function(t,e){void 0!==t&&void 0!==e||console.error("WOOALBUM ERROR : undefined container width or height!"),void 0===this.config.size&&(this.config.size={width:"auto",height:"auto"}),this.config.size.width=t,this.config.size.height=e,"auto"===t?this.size.width=window.innerWidth-20:this.size.width=parseInt(t),this.container.style.width=this.size.width+"px","auto"===e?this.size.height=window.innerHeight:this.size.height=parseInt(e),this.container.style.height=this.size.height+"px"},s.prototype._calLay=function(){var t={1:function(t){var e={1:{width:"100%",height:"100%"}};return e[1]},2:function(t){var e=this.gutter.x/2,i={1:{width:"66.6666666666666%",height:"100%",position:"absolute",left:"-"+e+"px"},2:{width:"66.6666666666666%",height:"100%",position:"absolute",right:"-"+e+"px"}};return i[t]},3:function(t){var e=this.size.width,i=this.size.height,o=this.gutter.x,s=this.gutter.y,h=parseInt((i-s)/2),n={1:{width:""+(e-h-o)+"px",height:"100%","float":"left"},2:{width:""+h+"px",height:""+h+"px","float":"right"},3:{width:""+h+"px",height:""+h+"px",position:"absolute",bottom:"0",right:"0"}};return n[t]},4:function(t){var e=this.size.width,i=this.size.height,o=this.gutter.x,s=this.gutter.y,h=(e-o)/2,n=(i-s)/2,r={1:{width:h+"px",height:n+"px",position:"absolute",left:"0",top:"0"},2:{width:h+"px",height:n+"px",position:"absolute",right:"0",top:"0"},3:{width:h+"px",height:n+"px",position:"absolute",left:"0",bottom:"0"},4:{width:h+"px",height:n+"px",position:"absolute",right:"0",bottom:"0"}};return r[t]},5:function(t){var e=this.size.width,i=this.size.height,o=this.gutter.x,s=this.gutter.y,h=parseInt((e-2*o)/3),n=parseInt((i-s)/3),r={1:{width:""+(2*h+o)+"px",height:""+2*n+"px",position:"absolute",left:0,top:0},2:{width:""+h+"px",height:""+h+"px",position:"absolute",right:0,top:0},3:{width:""+h+"px",height:""+n+"px",position:"absolute",left:0,bottom:0},4:{width:""+h+"px",height:""+n+"px",position:"absolute",bottom:0,left:h+o+"px"},5:{width:""+h+"px",height:""+(i-h-s)+"px",position:"absolute",bottom:"0",right:"0"}};return r[t]},6:function(t){var e=this.size.width,i=this.size.height,o=this.gutter.x,s=this.gutter.y,h=parseInt((e-2*o)/3),n=parseInt((i-2*s)/3),r={1:{width:""+(2*h+o)+"px",height:""+(2*n+s)+"px",position:"absolute",left:0,top:0},2:{width:""+h+"px",height:""+n+"px",position:"absolute",right:0,top:0},3:{width:""+h+"px",height:""+n+"px",position:"absolute",right:0,top:""+(n+s)+"px"},4:{width:""+h+"px",height:""+n+"px",position:"absolute",left:0,bottom:0},5:{width:""+h+"px",height:""+n+"px",position:"absolute",left:""+(h+o)+"px",bottom:0},6:{width:""+h+"px",height:""+n+"px",position:"absolute",right:0,bottom:0}};return r[t]}},e=this.images.length;e>6&&(e=6),1>e&&(e=1),this.calSize=t[e];var i=this.container.getAttribute("class"),o=/\sele-[1-6]/;if(o.test(i)){var s=i.replace(o," ele-"+e+" ");this.container.setAttribute("class",s)}else this.container.setAttribute("class",i+" ele-"+e)},n["default"].prototype.addImage=function(t){if("string"==typeof t)return void this.addImage([t]);for(var e=0,i=t.length;i>e;e++)this.images.push(t[e]);this._calLay(),this._clearTmp(),this.layLoadItems();for(var e=0,i=t.length;i>e;e++)this._addImage(t[e])},s.prototype._init=function(t){},e["default"]=s},function(t,e,i){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function s(t){n["default"].call(this,t),this.type="barrel",this.barrelBin={max:0,min:0},this.barrelHeight={max:0,min:0},this.tmp={row:[],ratioSum:0,ratioMax:0,ratioMaxK:0,ratioThre:{min:0,max:0},top:0},this.init(t)}Object.defineProperty(e,"__esModule",{value:!0});var h=i(2),n=o(h);s.prototype=new n["default"],s.prototype.constructor=s,s.prototype._clearTmp=function(){this.tmp.row=[],this.tmp.ratioSum=0,this.tmp.top=0,this.tmp.ratioMax=0,this.tmp.ratioMaxK=0},s.prototype._layItem=function(t,e){t.style.visibility="hidden",t.style.display="block",this.tmp.row.push(t);var i=t.getElementsByTagName("img")[0],o=i.offsetWidth/i.offsetHeight;this.tmp.ratioSum+=o,o>this.tmp.ratioMax&&(this.tmp.ratioMax=o,this.tmp.ratioMaxK=this.tmp.row.length-1);var s=this.size.width-this.gutter.x*(this.tmp.row.length-1);if(this.tmp.ratioThre.min=s/this.barrelHeight.max,this.tmp.ratioThre.max=s/this.barrelHeight.min,this.tmp.ratioSum>=this.tmp.ratioThre.min&&this.tmp.ratioSum<=this.tmp.ratioThre.max){this.hideLoading();for(var h=Math.round(s/this.tmp.ratioSum),n=0,r=0,a=this.tmp.row.length;a>r;r++){var t=this.tmp.row[r],i=t.getElementsByTagName("img")[0];t.style.height=h+"px",i.style.height=h+"px",t.style.top=this.tmp.top+"px",t.style.left=n+"px",t.style.display="block",t.style.visibility="",n+=this.gutter.x+this.tmp.row[r].offsetWidth}var l=this.tmp.row[this.tmp.row.length-1];l.style.left=this.size.width-l.offsetWidth+"px",this.tmp.top+=this.gutter.y+h,this.container.style.height=this.tmp.top-this.gutter.y+"px",this.tmp.row=[],this.tmp.ratioSum=0,this.tmp.ratioMax=0,this.tmp.ratioMaxK=0}else if(this.tmp.ratioSum>this.tmp.ratioThre.max){this.hideLoading(),console.log("woooooo~");for(var h=this.barrelHeight.min,n=0,p=Math.round((this.tmp.ratioThre.max+this.tmp.ratioMax-this.tmp.ratioSum)*h/this.tmp.ratioMax),c=Math.round((h-p)/2),r=0,a=this.tmp.row.length;a>r;r++){var t=this.tmp.row[r],i=t.getElementsByTagName("img")[0];r!==this.tmp.ratioMaxK?(t.style.height=h+"px",i.style.height=h+"px",t.style.top=this.tmp.top+"px"):(t.style.height=p+"px",i.style.height=p+"px",t.style.top=this.tmp.top+c+"px"),t.style.left=n+"px",t.style.display="block",t.style.visibility="",n+=this.gutter.x+this.tmp.row[r].offsetWidth}var l=this.tmp.row[this.tmp.row.length-1];l.style.left=this.size.width-l.offsetWidth+"px",this.tmp.top+=this.gutter.y+h,this.container.style.height=this.tmp.top-this.gutter.y+"px",this.tmp.row=[],this.tmp.ratioSum=0,this.tmp.ratioMax=0,this.tmp.ratioMaxK=0}else t.style.display="none";e||(this.elements.push(t),this.elements.length==this.images.length&&this.isResizeRefreshEnabled()&&("auto"===this.config.size.height?this.container.offsetHeight<=window.innerHeight&&this.fetchData():this.container.offsetHeight<=this.config.size.height&&this.fetchData()))},s.prototype._initCfg=function(t){var e=t.barrel;this.setBarrelHeight(e.heightMin,e.heightMax,!1)},s.prototype._calLay=function(){this.tmp.ratioThre.min=this.size.width/this.barrelHeight.max,this.tmp.ratioThre.max=this.size.width/this.barrelHeight.min},s.prototype._init=function(){},s.prototype.setBarrelBin=function(t,e){return void 0===t||void 0===e||t>e?void console.error("error barrel bin value!"):(this.barrelBin.min=parseInt(t),void(this.barrelBin.max=parseInt(e)))},s.prototype.getBarrelBinMax=function(){return this.barrelBin.max},s.prototype.getBarrelBinMin=function(){return this.barrelBin.min},s.prototype.setBarrelHeight=function(t,e,i){return void 0===t||void 0===e||t>e?void console.error("error barrel height value"):(void 0===i&&(i=!0),this.barrelHeight.min=parseInt(t),this.barrelHeight.max=parseInt(e),void(i&&this._reload()))},s.prototype.getBarrelHeightMax=function(){return this.height.max},s.prototype.getBarrelHeightMin=function(){return this.height.max},e["default"]=s}]);